<!DOCTYPE html>
<html>
<head>
    <title>Debug Bookmarks</title>
    <style>
        body { font-family: monospace; padding: 20px; }
        .paper { border: 1px solid #ccc; margin: 10px 0; padding: 10px; }
        .has-poster { background-color: #e8f5e9; }
        .no-poster { background-color: #fff3e0; }
    </style>
</head>
<body>
    <h1>Bookmark Debug Tool</h1>
    <button onclick="checkBookmarks()">Check Bookmarks</button>
    <button onclick="clearBookmarks()">Clear All Bookmarks</button>
    <div id="output"></div>

    <script>
        function checkBookmarks() {
            const bookmarks = localStorage.getItem('neuriscout_bookmarks');
            const output = document.getElementById('output');
            
            if (!bookmarks) {
                output.innerHTML = '<p>No bookmarks found</p>';
                return;
            }

            const parsed = JSON.parse(bookmarks);
            let html = `<h2>Found ${parsed.length} bookmarks:</h2>`;
            
            parsed.forEach((paper, i) => {
                const hasPoster = paper.poster_position && paper.poster_position.trim();
                const className = hasPoster ? 'has-poster' : 'no-poster';
                html += `
                    <div class="paper ${className}">
                        <strong>${i + 1}. ${paper.title}</strong><br>
                        ID: ${paper.id}<br>
                        Session: ${paper.session}<br>
                        Poster Position: <code>${paper.poster_position || 'NOT SET'}</code><br>
                        Keys: ${Object.keys(paper).join(', ')}
                    </div>
                `;
            });
            
            output.innerHTML = html;
        }

        function clearBookmarks() {
            if (confirm('Clear all bookmarks?')) {
                localStorage.removeItem('neuriscout_bookmarks');
                alert('Bookmarks cleared!');
                document.getElementById('output').innerHTML = '';
            }
        }

        // Auto-check on load
        window.onload = checkBookmarks;
    </script>
</body>
</html>
